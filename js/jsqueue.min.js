function jsqueue_main(){this.construct=function(){this.pid=1;this.components={};this.debug=!1;this.loops={};this.queue=[];this.registers={};this.config={auto_start:"true",maxlife:5E4,timeout:10};this.stack={}};this["debugger"]=function(){console.log("jsqueue debugger enabled");return this.debug=!0};this.register=function(b,c,a,d){this.components[b]={mode:c||"plugin",aclass:a||"",afunction:d||"",state:"inactive"}};this.set_reg=function(b,c){this.registers[b]="object"===typeof c?$.extend({},c):c;this.debug&&
(console.info("jsqueue>set_reg:"+b),console.info(c))};this.get_reg=function(b,c){var a=null;c=c||!1;a="object"===typeof this.registers[b]?$.extend({},this.registers[b]):this.registers[b];c&&delete this.registers[b];return a};this.clear_reg=function(b){delete this.registers[b];this.debug&&console.info("jsqueue>clear_reg:"+b)};this.killtag=function(b){for(var c=0;c<this.queue.length;c++)if(this.queue[c].tag==b){this.queue.splice(c,1);console.info("jsqueue>killed tag:"+b);break}};this.clean_queue=function(){for(var b=
0,c=!0;c;)for(var c=!1,a=0;a<this.queue.length;a++){if("finished"==this.queue[a].state){this.queue.splice(a,1);c=!0;break}if(jQuery.now()>this.queue[a].time+this.config.maxlife){this.debug&&console.warn("Cleaned:"+this.queue[a].PID+":"+this.queue[a].command+":"+this.queue[a].tag);this.queue.splice(a,1);b++;c=!0;break}}0<b&&this.debug&&console.info("Cleaned ("+b+") expired items from queue")};this.start_components=function(){var b=this;jQuery(".jsqueue").each(function(a,d){var e=jQuery(this).data();
b.components[e.jsq_name]={mode:"plugin",aclass:"."+e.jsq_name,afunction:e.jsq_plugin,state:"inactive"}});for(var c in b.components)if("plugin"==b.components[c].mode)if(jQuery(b.components[c].aclass)[b.components[c].afunction])jQuery(b.components[c].aclass)[b.components[c].afunction](jQuery(b.components[c].aclass).data());else console.info("Could not start component "+c)};this.add=function(b){b=jQuery.extend({},b);b.state="queued";b.time=jQuery.now();b.logic=!0;b.tag?this.killtag(b.tag):b.tag="untagged";
b.stack||(b.stack=[]);b.data||(b.data={});var c=this.pid;this.queue.push(b);this.process();return c};this.process=function(b){b=this;for(var c=0;c<b.queue.length;c++)if("BROADCAST"==b.queue[c].component){b.queue[c].state="running";for(var a=0;a<b.components.length;a++)jQuery(b.components[a].aclass).trigger("command",[b.queue[c].command,b.queue[c].data]);b.queue[c].state="finished"}else if(b.components[b.queue[c].component]&&"active"==b.components[b.queue[c].component].state&&"queued"==b.queue[c].state&&
(!b.queue[c].reg||b.registers[b.queue[c].reg])){b.queue[c].state="running";b.queue[c].data.PID=b.pid;a=b.queue[c];b.pid++;var d=a.data.timer||b.config.timeout;switch(a.datamode){case "stack":a.data=jQuery.extend({},a.data,a.stack.pop());break;case "allstack":a.data.stack=a.stack;break;case "listen":a.data=jQuery.extend({},a.data,a.stack[a.stack.length-1])}b.launch_queue_item(a.component,a.command,a.data,d);a.hasOwnProperty("chain")?(a.state="triggered",b.debug&&console.info("PID("+a.data.PID+") Ran chain "+
a.command+":"+d)):(a.state="finished",b.debug&&console.info("PID("+a.data.PID+") Ran command "+a.command+":"+d))}b.clean_queue()};this.launch_queue_item=function(b,c,a,d){var e=this;"off"!=a.munge&&core.data.datamunge(a);e.debug&&console.log(a);if("object"!=e.components[b].mode)setTimeout(function(){jQuery(e.components[b].aclass).trigger("command",[c,a])},d);else{var f=e.components[b].object;f[c]?setTimeout(function(){f[c](a)},d):console.log(b+":"+c+" is not a valid object!")}};this.set_by_pid=function(b,
c){for(var a=0;a<self.queue.length;a++)self.queue[a].data.PID==b&&(self.queue[a]=c)};this.push=function(b,c){for(var a=0;a<this.queue.length;a++)this.queue[a].data.PID==b&&"triggered"==this.queue[a].state&&(this.queue[a].stackname&&(this.stack[this.queue[a].stackname]=c,this.debug&&console.warn("PID("+b+") updated named stack "+this.queue[a].stackname)),this.queue[a].stack.push(c),this.debug&&console.warn("PID("+b+") updated the stack"))};this.push_name=function(b,c){this.stack[b]=c};this.get_stack=
function(){return this.stack};this.get_stack_name=function(b){return this.stack[b]};this.logicfail=function(b){for(var c=0;c<this.queue.length;c++)if(this.queue[c].data.PID==b){this.queue[c].logic=!1;break}};this.finished=function(b){for(var c=0;c<this.queue.length;c++)if(this.queue[c].data.PID==b&&"triggered"==this.queue[c].state){this.queue[c].logic?(b=this.queue[c].chain[0],b.stack=this.queue[c].stack,this.queue[c].chain.splice(0,1),0<this.queue[c].chain.length&&(b.chain=this.queue[c].chain),this.queue[c].fail_chain&&
0<this.queue[c].fail_chain.length&&(b.fail_chain=this.queue[c].fail_chain),this.queue[c].state="finished",this.add(b)):(this.queue[c].fail_chain&&(b=this.queue[c].fail_chain[0],b.stack=this.queue[c].stack,this.queue[c].fail_chain.splice(0,1),0<this.queue[c].fail_chain.length&&(b.chain=this.queue[c].fail_chain),this.add(b)),this.queue[c].state="finished");break}};this.activate=function(b,c){this.components[b].state="active";c&&(this.components[b].object=c);this.debug&&console.warn("Component "+b+" Reports Active")};
this.construct()}var jsqueue=null;jQuery(window).load(function(){var b={};0<jQuery("#jsqueue").length&&(b=JSON.parse(jQuery("#jsqueue").attr("data-config")));var c=jsqueue=new jsqueue_main;c.config=jQuery.extend(c.config,b);isNull(c.config.auto_start)?jsqueue.start_components():"true"==c.config.auto_start&&jsqueue.start_components();isNull(window.loadFnc)||window.loadFnc()});function isNull(b){return!("undefined"!==typeof b&&b)};(function(b){function c(a,d){var e=this;e.options=d;e.div=a;e.anims={};b(a).on({command:function(a,b,d){e[b](d)}});e.INIT_ANIMS();jsqueue.activate("ANIMATE")}c.prototype={constructor:c,PLAY_ANIMATION:function(a){this.RESET_FRAMES(a);b(a.anim+" .intro-slide").css("opacity","0");this.anims[a.anim]={position:0,frames:a.frames};this.PLAY_FRAME({anim:a.anim,frame:b(a.anim+" .slide[data-slide="+this.anims[a.anim].position+"]").attr("data-frame")});jsqueue.finished(a.PID)},RESET_FRAMES:function(a){b(a.anim+
" .slide").removeClass("transition");b(a.anim+" .slide").css("opacity","0");b(a.anim+" .slide").addClass("transition")},PLAY_FRAME:function(a){b(a.anim+" .slide").removeClass("active");if(a.frame){a.frame=JSON.parse(a.frame);for(var d=0;d<a.frame.length;d++)for(var e in a.frame[d])b(a.anim+" .slide[data-slide="+e+"]").css(a.frame[d][e])}b(a.anim+" .slide[data-slide="+this.anims[a.anim].position+"]").addClass("active");b(a.anim+" .slide[data-slide="+this.anims[a.anim].position+"]").css("opacity","1");
this.anims[a.anim].position++;this.anims[a.anim].position>this.anims[a.anim].frames&&(b(a.anim+" .intro-slide").css("opacity","1"),this.RESET_FRAMES(a))},INIT_ANIMS:function(a){var d=this;b(".animation").each(function(){var a=b(this);a.children(".slide").each(function(){b(this).css("opacity","0");b(this).attr("data-parent","#"+a.attr("id"));b(this).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){b(this).hasClass("active")&&d.PLAY_FRAME({anim:b(this).attr("data-parent"),
frame:b(this).attr("data-frame")})})})})}};b.fn.jsAnimate=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsAnimate",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsAnimate.Constructor=c})(window.jQuery);(function(b){function c(a,d){var e=this;e.options=d;e.div=a;e.cal=null;b(a).on({command:function(a,b,d){e[b](d)}});jsqueue.activate("CALENDAR")}c.prototype={constructor:c,INIT_CALENDAR:function(a){this.cal=a.element;b(a.element).fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},dragRevertDuration:0,editable:!0,droppable:!0,eventDragStop:function(b,e){window[a["delete"]](b,e)},eventResize:function(b){window[a.update](b)},eventDrop:function(b){window[a.update](b)},
drop:function(b,e,c){window[a.drop](b,e,c,this)}});jsqueue.finished(a.PID)},CALENDAR_ADD_EVENTS:function(a){b(this.cal).fullCalendar("removeEvents");b(this.cal).fullCalendar("addEventSource",a.data);b(this.cal).fullCalendar("render");jsqueue.finished(a.PID)}};b.fn.jsCalendar=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsCalendar",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsCalendar.Constructor=c})(window.jQuery);window.core={version:"1.0.0"};
core.data={htmlinject:function(b){var c,a=b,d;for(d in jsqueue.loops)for(var e=RegExp("~"+d+"~","g");e.exec(b);)a=a.replace("~"+d+"~",jsqueue.loops[d]);b=a;for(e=/\~([a-zA-Z\.]*:\/\/[a-zA-Z_\/\.0-9@\s]*[\:]{0,1})/g;c=e.exec(b);)d=c[1],c=c[1].replace(/\:$/,""),a=a.replace("~"+d,this.uritodata(c));return a},uritodata:function(b){function c(a,b){var d=b.match(/^@(.*)/);return d?d[1]:a?a[b]:""}function a(a){for(var b=a,d=/\[([a-zA-Z\.]*:\/\/[a-zA-Z_\/\.0-9@\s]*)\]/g;e=d.exec(a);)b=b.replace("["+e[1]+
"]","."+core.data.uritodata(e[1]));var e=b.match(/(.*?):\/\/(.*)/);switch(e[1]){case "global":return a=e[2].split(".").reduce(c,window);case "stack":return a=e[2].match(/(.*?)\/(.*)/),b=a[1].split(".").reduce(c,jsqueue.stack),a=a[2]?a[2].split(".").reduce(c,b):b,void 0===a?"":a;default:return"data uri ["+e[1]+"] is not valid"}}b=b.split(",");for(var d,e=0;e<b.length&&!(d=a(b[e]));e++);return d},check_params:function(b,c){var a=!0,d;for(d in b)c[d]||(console.error(b[d].message),a=!1);return a},serializer:function(b,
c){return"object"===typeof c?"Object":c},datamunge:function(b){var c=this;$.each(b,function(a,d){c.datamunge_recursive(a,d,b,b,0)})},datamunge_recursive:function(b,c,a,d,e){var f=this;if(!(10<e))if(c instanceof Object)$.each(c,function(c,h){f.datamunge_recursive(c,h,a,d[b],e++)});else{var g;if("string"==typeof c&&(g=c.match(/\!jquery:([#a-zA-Z\-_\.0-9]*)[:]{0,1}/))){var h=g[1].replace(/:.*/,"");jQuery(h).is("input:not(:checkbox),textarea,select")?d[b]=c.replace(/\!jquery:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,
jQuery(h).val()):jQuery(h).is(":checkbox")?jQuery(h).is(":checked")?d[b]=c.replace(/\!jquery:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,jQuery(h).val()):d[b]="":d[b]=c.replace(/\!jquery:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,jQuery(h).text())}if("string"==typeof c&&(g=c.match(/\!data:(.*)[:]{0,1}/))){var h=g[1].replace(/:.*/,""),k=function(a,b){return a[b]},h=h.split(".").reduce(k,a);c.match(/^\!data:(.*)[:]{0,1}$/)?d[b]=h:d[b]=c.replace(/\!data:.*[:]{0,1}/,h)}"string"==typeof c&&(g=c.match(/\!stack:\/\/(.*)[:]{0,1}/))&&(h=
g[1].replace(/:.*/,""),g=h.split("/"),h=g[1],a=jsqueue.stack[g[0]],k=function(a,b){return a[b]},h=h.split(".").reduce(k,a),d[b]=c.replace(/\!stack:\/\/.*[:]{0,1}/,h))}}};
core.forms={encode:function(b,c){$(b+" .rest-field").each(function(a,b){var e=$(this).attr("data-send").split("."),f=c;for(a=0;a<e.length;a++)if(f[e[a]]||(f[e[a]]={}),e.length!=a+1)f=f[e[a]];else{if($(this).is(":checkbox"))if($(this).is(":checked"))if("csv"==$(this).attr("data-mode")){"object"==typeof f[e[a]]&&(f[e[a]]="");var g="";f[e[a]]&&(g=",");f[e[a]]+=g+$(this).val()}else f[e[a]]=$(this).val();else $(this).attr("data-off")&&(f[e[a]]=$(this).attr("data-off"));else"json"==$(this).attr("data-encode")?
f[e[a]]=JSON.parse($(this).val()):$(this).attr("data-ptr")?f[e[a]]=$($(this).attr("data-ptr")).val():f[e[a]]=$(this).val();break}})}};(function(b){function c(a,d){var e=this;e.options=d;e.div=a;b(a).on({command:function(a,b,d){e[b](d)}});e.MODAL_INIT();jsqueue.activate("MODAL")}c.prototype={constructor:c,MODAL_DISPLAY:function(a){b(this.div).html(b(a.template).render(a));b(this.div).off("shown.bs.modal");b(this.div).on("shown.bs.modal",function(a){b("#modal_text_helper").focus()});b(this.div).modal("show");jsqueue.finished(a.PID)},MODAL_CLOSE:function(a){b(this.div).modal("hide");jsqueue.finished(a.PID)},MODAL_TEXT_HELPER_CLICK:function(a){var d=
b(a.target);jsqueue.add({component:"MODAL",command:"MODAL_DISPLAY",data:{template:a.template,form_value:b(d).val()},chain:[{component:"TOOLS",command:"TOOLS_ADD_EVENTS",data:{triggers:[{aclass:"#modal-save",atrigger:"click",afunction:function(){b(d).val(b("#modal_text_helper").val())}}]}}]})},MODAL_TEXT_HELPER:function(a){b(a.aclass).focus(function(){var d=this;jsqueue.add({component:"MODAL",command:"MODAL_DISPLAY",data:{template:a.template,form_value:b(d).val()},chain:[{component:"TOOLS",command:"TOOLS_ADD_EVENTS",
data:{triggers:[{aclass:"#modal-save",atrigger:"click",afunction:function(){b(d).val(b("#modal_text_helper").val())}}]}}]})})},MODAL_INIT:function(a){b(this.div).addClass("modal fade")}};b.fn.jsModal=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsModal",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsModal.Constructor=c})(window.jQuery);(function(b){function c(a,d){var e=this;e.options=d;e.div=a;b(a).on({command:function(a,b,d){e[b](d)}});jsqueue.activate("MENUS")}c.prototype={constructor:c,MENUS_DROPDOWNS:function(a){b(".ddz-option").click(function(){b(".ddz-option").siblings("ul").removeClass("show-ddz-below");b(this).hasClass("active")?b(".ddz-option").removeClass("active"):(b(this).siblings("ul").addClass("show-ddz-below"),b(".ddz-option").removeClass("active"),b(this).addClass("active"))});b(".ddz-option-sub").click(function(){b(".ddz-option-sub").siblings("ul").removeClass("show-ddz-below");
b(this).siblings("ul").addClass("show-ddz-below")});jsqueue.finished(a.PID)}};b.fn.jsMenus=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsMenus",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsMenus.Constructor=c})(window.jQuery);(function(b){function c(a,d){var e=this;e.options=d;e.div=a;b(a).on({command:function(a,b,d){e[b](d)}});e.TIME_INIT();jsqueue.activate("TIME")}c.prototype={constructor:c,TIME_DISPLAY:function(a){var d=new Date;b(this.options.element).html(d.toUTCString());jsqueue.add({component:"TIME",command:"TIME_DISPLAY",data:{timer:3E4}});jsqueue.finished(a.PID)},TIME_INIT:function(a){jsqueue.add({component:"TIME",command:"TIME_DISPLAY"})}};b.fn.jsTime=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),
f="object"==typeof a&&a;e||d.data("jsTime",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsTime.Constructor=c})(window.jQuery);(function(b){function c(a,d){var e=this;e.options=d;e.$element=b(a);b(a).on({command:function(a,b,d){if(e[b])e[b](d);else console.warn("Error no cmd:"+b)}});jsqueue.activate("TOOLS")}c.prototype={constructor:c,TOOLS_FULLSCREEN:function(a){a=window.document;var b=a.documentElement,e=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullscreen,c=a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen;a.fullscreenElement||a.mozFullScreenElement||
a.webkitFullscreenElement||a.msFullscreenElement?c.call(a):e.call(b);console.log("full screen")},TOOLS_RUN:function(a){b(a.target).trigger("run");jsqueue.finished(a.PID)},TOOLS_CLICK:function(a){b(a.target).click();jsqueue.finished(a.PID)},TOOLS_IF:function(a){a.if_path.split(".").reduce(function(a,b){return a?a[b]:""},a)!==a.if_check&&jsqueue.logicfail(a.PID);jsqueue.finished(a.PID)},TOOLS_UPDATE_VALUE:function(a){b(a.element).val(a.value);jsqueue.finished(a.PID)},TOOLS_EXECUTE_TEMPLATE:function(a){b("#command-window").html(b(a.template).render(a));
jsqueue.add({component:"WORKFLOW",command:"WORKFLOW_START"});jsqueue.finished(a.PID)},TOOLS_UPDATE_VALUE_WITH_VALUE:function(a){var d=b(a.passed_element).val();b(a.element).val(d);jsqueue.finished(a.PID)},TOOLS_UPDATE_VALUE_WITH_HTML:function(a){var d=b(a.passed_element).html();b(a.element).val(d);jsqueue.finished(a.PID)},TOOLS_UPDATE_HTML:function(a){b(a.element).html(a.value);jsqueue.finished(a.PID)},TOOLS_START_CAROUSEL:function(a){b(".carousel").carousel();jsqueue.finished(a.PID)},TOOLS_SET_ATTRIBUTE:function(a){b(a.target).attr(a.attributes);
jsqueue.finished(a.PID)},TOOLS_SLIDE_TOGGLE:function(a){var d=a.offset||20;if(a.target){var e=b(a.target);0>e.position().left?(e.css({left:"0px"}),e.addClass("active")):(e.css({left:"-"+(e.width()-d)+"px"}),e.removeClass("active"))}else console.warn("TOOL_SLIDE_TOGGLE called with no target");jsqueue.finished(a.PID)},TOOLS_FORMAT_DATA:function(a){function b(a,d){return a[d]}var e={},c;for(c in a.paths)if("root"==a.paths[c])e[c]=a;else{var g=c.split(".");1==g.length?e[c]=a.paths[c].split(".").reduce(b,
a):(e[g[0]]={},e[g[0]][g[1]]=a.paths[c].split(".").reduce(b,a))}jsqueue.push(a.PID,e);jsqueue.finished(a.PID)},TOOLS_SET_REG:function(a){function b(a,d){return a[d]}if(a.path){var c=a.path.split(".").reduce(b,a);jsqueue.set_reg(a.reg,c)}else jsqueue.set_reg(a.reg,a.value);jsqueue.finished(a.PID)},TOOLS_CLEAR_REG:function(a){jsqueue.clear_reg(a.reg);jsqueue.finished(a.PID)},TOOLS_TOGGLE_HIDDEN:function(a){for(var d=0;d<a.elements.length;d++)b(a.elements[d]).toggleClass("hidden");jsqueue.finished(a.PID)},
TOOLS_TOGGLE_CLASS:function(a){if(!a.ifclass||this.ifclass(a.ifclass))a.clear||a.set?(b(a.clear).removeClass(a["class"]),b(a.set).addClass(a["class"])):b(a.target).toggleClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_STATE_CLASS:function(a){a.ifclass&&this.ifclass(a.ifclass)?(b(a.target).removeClass(a.falseclass),b(a.target).addClass(a.trueclass)):(b(a.target).removeClass(a.trueclass),b(a.target).addClass(a.falseclass));jsqueue.finished(a.PID)},ifclass:function(a){return 0<b(a).length?!0:!1},TOOLS_TOGGLE_BETWEEN_CLASS:function(a){a.clear||
a.set?(b(a.clear).removeClass(a["class"]),b(a.set).addClass(a["class"])):b(a.target).toggleClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_UPDATE_CLASS:function(a){a.target=a.target||a.element;b(a.target).removeClass(a.remove_class);b(a.target).addClass(a.add_class);jsqueue.finished(a.PID)},TOOLS_SET_HIDDEN:function(a){a.target=a.target||a.element;b(a.target).addClass("hidden");jsqueue.finished(a.PID)},TOOLS_REMOVE_HIDDEN:function(a){a.target=a.target||a.element;b(a.target).removeClass("hidden");
jsqueue.finished(a.PID)},TOOLS_REMOVE_CLASS:function(a){b(a.target).removeClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_ADD_CLASS:function(a){b(a.target).addClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_FIND_HELP:function(a){b(".helper").each(function(){var a=b(this),c=a.data();a.popover({trigger:"click",placement:"right",html:!0,title:c.title,content:function(){return c.templateDisplay?b(c.templateDisplay).html():c.helptext}}).click(function(a){a.preventDefault();jsqueue.add({component:"WORKFLOW",
command:"WORKFLOW_START"})})});jsqueue.finished(a.PID)},TOOLS_DISPLAY_TEMPLATE:function(a){a.target=a.target||a.element;0>=b(a.target).length&&console.warn("Element does not exist:"+a.target);0>=b(a.template).length&&console.warn("Template does not exist"+a.template);b(a.target).html(b(a.template).render(a));jsqueue.finished(a.PID)},TOOLS_RENDER_TEMPLATE:function(a){var d={};d.body=b(a.template).render(a);jsqueue.push(a.PID,d);jsqueue.finished(a.PID)},TOOLS_WF_TEMPLATE:function(a){0<b(a.template).length?
(b(a.target).html(core.data.htmlinject(b(a.template).html())),a["class"]&&b(a.target).addClass(a["class"])):console.info("Warning template ["+a.template+"] not found");jsqueue.finished(a.PID)},TOOLS_RUN_FUNCTION:function(a){if(a.parameters)window[a.afunction](a.parameters);else window[a.afunction]();jsqueue.finished(a.PID)},TOOLS_ADD_EVENTS:function(a){for(var d=0;d<a.triggers.length;d++)if(b(a.triggers[d].aclass).unbind(a.triggers[d].atrigger),"string"==typeof a.triggers[d].afunction)b(a.triggers[d].aclass).on(a.triggers[d].atrigger,
window[a.triggers[d].afunction]);else b(a.triggers[d].aclass).on(a.triggers[d].atrigger,a.triggers[d].afunction);a.global&&a.global();jsqueue.finished(a.PID)},helper_replace_value:function(a,d,c,f){var g=this;if(d instanceof Object)b.each(d,function(b,d){g.helper_replace_value(b,d,c,f[a])});else{var h;if("string"==typeof d&&(h=d.match(/%(.*?)%/))){console.info("TOOLS_REST_API call is using depricated helper_replace_value % value. Please move to !data: format");d=h[1].match(/[^\.]+(?:\.\.[^\.]+)*/g);
h=c;for(var k=0;k<d.length;k++)if(d[k]=d[k].replace(/\.\./,"."),h[d[k]]||(h[d[k]]={}),d.length!=k+1)h=h[d[k]];else{f[a]="object"==typeof h[d[k]]?h[d[k]]:f[a].replace(/%.*?%/,h[d[k]]);break}}else"string"==typeof d&&(h=d.match(/^(#.*?)/))&&(console.info("TOOLS_REST_API call is using depricated helper_replace_value # value. Please move to !jquery: format"),d.match(/^(#.*?)\&array/)?(h=d.match(/^(#.*?)\&array/),f[a]=[jQuery(h[1]).val()]):((h=d.match(/^(#\..*?)/))&&(d=d.substr(1)),f[a]=jQuery(d).val()))}},
TOOLS_DISABLE_BUTTON:function(a){a.button&&(a.text&&(b(a.button).attr("data-oldtext",b(a.button).text()),b(a.button).text(a.text)),a.aclass&&(b(a.button).attr("data-oldclass",b(a.button).attr("class")),b(a.button).removeClass(b(a.button).attr("class")),b(a.button).addClass(a.aclass)),!0==a.displayLoadAnimation&&b(a.button).append("<span class='glyphicon glyphicon-refresh spinning'></span>"),b(a.button).prop("disabled",!0));if(a.buttons)for(var d=0;d<a.buttons.length;d++)b(a.buttons[d]).prop("disabled",
!0);jsqueue.finished(a.PID)},TOOLS_ENABLE_BUTTON:function(a){a.button&&(b(a.button).prop("disabled",!1),a.text&&b(a.button).text(a.text),a.revert&&!0==a.revert&&b(a.button).text(b(a.button).attr("data-oldtext")),b(a.button).attr("data-oldclass")&&(b(a.button).removeClass(b(a.button).attr("class")),b(a.button).addClass(b(a.button).attr("data-oldclass"))));if(a.buttons)for(var d=0;d<a.buttons.length;d++)b(a.buttons[d]).prop("disabled",!1);jsqueue.finished(a.PID)},TOOLS_CHANGE_BUTTON_TEXT:function(a){b(a.button).text(a.text);
jsqueue.finished(a.PID)},TOOLS_CHANGE_BUTTON_COLOUR:function(a){a.button&&(a.toAdd&&a.toRemove)&&b(a.button).addClass(a.toAdd).removeClass(a.toRemove);jsqueue.finished(a.PID)},TOOLS_DISPLAY_LOAD_ANIMATION:function(a){a.element&&b(a.element).append("<span class='glyphicon glyphicon-refresh spinning'></span>");jsqueue.finished(a.PID)},TOOLS_DELAY_ACTION:function(a){a.component&&(a.command&&a.data&&a.delay)&&window.setTimeout(function(){a.chain?jsqueue.add({component:a.component,command:a.command,data:a.data,
chain:a.chain}):jsqueue.add({component:a.component,command:a.command,data:a.data})},a.delay);jsqueue.finished(a.PID)},TOOLS_SCHEDULE_ACTION:function(a){a.chain?jsqueue.add({component:a.component,command:a.command,data:a.data,chain:a.chain}):jsqueue.add({component:a.component,command:a.command,data:a.data});setInterval(function(){a.chain?jsqueue.add({component:a.component,command:a.command,data:a.data,chain:a.chain}):jsqueue.add({component:a.component,command:a.command,data:a.data})},1E4);jsqueue.finished(a.PID)},
TOOLS_REDIRECT:function(a){var d=this;a&&b.each(a,function(b,c){d.helper_replace_value(b,c,a,a)});window.location=a.location;jsqueue.finished(a.PID)},TOOLS_ANIMSCROLL:function(a){b(a.element).animate({scrollLeft:a.offset},a.duration||400);jsqueue.finished(a.PID)},TOOLS_JS_SCROLL:function(a){b(a.element).each(function(){b(this).height(b(window).height())});jsqueue.finished(a.PID)},TOOLS_PROGRESS_DISPLAY:function(a){a.element&&a.name&&b(a.element).html('<div class="progress progress-striped active"><div class="progress-bar progress-bar-danger" id="'+
a.name+'" style="width: 0%;"></div></div>');jsqueue.finished(a.PID)},TOOLS_PROGRESS_UPDATE:function(a){a.element&&a.progress&&b(a.element).css("width",a.progress+"%");jsqueue.finished(a.PID)},TOOLS_RUN_JAVASCRIPT:function(a){eval(a["function"]+"("+a.args+");")},TOOLS_PUSH_NAME:function(a){jsqueue.push_name(a.stackname,a.data);jsqueue.finished(a.PID)},TOOLS_REST_API:function(a){var d=this,c={},f=b.extend(!0,{},a);f.uri||(f.uri=d.options.uri);if(f.form){if(f.validatefunction&&!window[f.validatefunction](f.form))return;
core.forms.encode(f.form,c)}f.json&&b.each(a.json,function(a,b){d.helper_replace_value(a,b,f,f.json)});c=b.extend(!0,{},f.json,c);c=encodeURIComponent(JSON.stringify(c));-1!=navigator.appVersion.indexOf("MSIE 9")||-1!=navigator.appVersion.indexOf("MSIE 8")?b.ajax({type:"POST",url:f.uri,data:c,async:!0,processData:!1,traditional:!1,headers:a.headers||{},success:function(b){a.nostack||(f.json&&f.json.ignoredata?jsqueue.push(f.PID,b.data):jsqueue.push(f.PID,b));jsqueue.finished(f.PID);d.debug&&(console.info("jsTools->call_api"),
console.info(b));f.success&&f.success(b)},error:function(a){d.debug&&(console.warn("jsTools->call_api"),console.warn(a))}}):b.ajax({type:"POST",url:f.uri,data:c,async:!0,crossDomain:!0,xhrFields:{withCredentials:!0},processData:!1,traditional:!1,headers:a.headers||{},success:function(b){a.nostack||(f.json&&f.json.ignoredata?jsqueue.push(f.PID,b.data):jsqueue.push(f.PID,b));jsqueue.finished(f.PID);d.debug&&(console.info("jsTools->call_api"),console.info(b));f.success&&f.success(b)},error:function(a){d.debug&&
(console.warn("jsTools->call_api"),console.warn(a))}})}};b.fn.jsTools=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsTools",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsTools.Constructor=c})(window.jQuery);(function(b){function c(a,c){var e=this;e.options=c;e.div=a;e.cal=null;b(a).on({command:function(a,b,c){e[b](c)}});jsqueue.activate("CKEDITOR")}c.prototype={constructor:c,INIT_EDITOR:function(a){CKEDITOR.replace(a.target);jsqueue.finished(a.PID)}};b.fn.jsCKeditor=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsCKeditor",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsCKeditor.Constructor=c})(window.jQuery);(function(b){function c(a,c){function e(a){document.dispatchEvent(new CustomEvent("readystatechange"))}var f=this;f.options=c;f.div=a;b(a).on({command:function(a,b,c){f[b](c)}});jsqueue.activate("WORKFLOW");!0==f.options.auto&&f.WORKFLOW_START({});var g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){b(this).data();f.ng_workflow_build(this);b(this).remove()};document.registerElement("wf-load",{prototype:g});g=Object.create(HTMLElement.prototype);g.createdCallback=function(){b(this).data();
var a=b(this).attr("data-events")||"click run";b(this).unbind(a);b(this).on(a,function(a){a.stopPropagation();f.ng_workflow_build(this);return b(this).attr("data-return")?b(this).attr("data-return"):!1})};document.registerElement("wf-event",{prototype:g});g=Object.create(HTMLElement.prototype);g.createdCallback=function(){var a=b(this).data();if(core.data.check_params({source:{message:"No source specified"}},a)){a.format||(a.format="TXT_ONLY");if(a.format.match(/DEBUG/g))debugger;var c=core.data.uritodata(a.source);
a.format.match(/CONSOLE/g)?console.log(c):("object"===typeof c&&(c=JSON.stringify(c)),c?b(this).text(c):b(this).text(""));a.format.match(/TXT_ONLY/g)&&b(this).contents().unwrap()}else console.log(this)};document.registerElement("wf-text",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){function a(b){for(var c,d=b,e=/([a-zA-Z]*:\/\/[a-zA-Z_\/\.\@\s]*)/g;c=e.exec(b);)d=d.replace(c[1],'"'+core.data.uritodata(c[1])+'"');return d}var c=b(this).data();if(core.data.check_params({statement:{message:"No statement specified"},
template:{message:"No template specified"}},c)){var d=a(c.statement);c.debug&&console.info(d);eval(d)?(b(this).append(core.data.htmlinject(b(c.template).html())),b(this).contents().unwrap()):b(this).remove();e(this)}else console.log(this)};document.registerElement("wf-if",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();if(core.data.check_params({source:{message:"No source specified"}},a)){var c=core.data.uritodata(a.source),d=this;b("wf-case",
d).each(function(){var a=b(this).data();a.value==c&&(b(d).html(core.data.htmlinject(b(a.template).html())),b("wf-default",d).remove());b(this).remove()});a=b("wf-default",d);if(0<a.length){var f=a.data();b(d).html(core.data.htmlinject(b(f.template).html()));a.remove()}b(d).contents().unwrap();e(this)}else console.log(this)};document.registerElement("wf-switch",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();if(core.data.check_params({source:{message:"No source specified"},
template:{message:"No template specified"}},a)){var c=a.index||"index",d=core.data.uritodata(a.source),f=a.target||this;if(0>=b(f).length)console.error("Target does not exist:"+a.target);else{jsqueue.loops[c]=0;if("[object Array]"===Object.prototype.toString.call(d))for(var g=0;g<d.length;g++)jsqueue.loops[c]=g,a.stackname&&jsqueue.push_name(a.stackname,d[g]),b(f).append(core.data.htmlinject(b(a.template).html())),e(f);else for(g in d)jsqueue.loops[c]=g,a.stackname&&jsqueue.push_name(a.stackname,
{key:g,value:d[g]}),b(f).append(core.data.htmlinject(b(a.template).html())),e(f);a.target?b(this).remove():b(this).contents().unwrap()}}else console.log(this)};document.registerElement("wf-for",{prototype:g})}c.prototype={constructor:c,WORKFLOW_START:function(a){var c=this;jsqueue&&jsqueue.debug&&b("[id]").each(function(){var a=b('[id="'+this.id+'"]');1<a.length&&a[0]==this&&console.warn("Multiple IDs #"+this.id)});a.mobile=a.mobile||!1;b(".js-workflow-onload,.js-workflow-onrun").each(function(){c.ng_workflow_build(this)});
b(".js-workflow").unbind("click");b(".js-workflow").unbind("run");b(".js-workflow:not([data-events])").on("click run",function(a){console.log("Class method js-workflow is now deprecated, convert to wf-event model");console.log(this);a.stopPropagation();c.ng_workflow_build(this);return b(this).attr("data-return")?b(this).attr("data-return"):!1});b(".js-workflow[data-events]").each(function(){console.log("Class method js-workflow is now deprecated, convert to wf-event model");console.log(this);b(this).on(b(this).attr("data-events"),
function(a){a.stopPropagation();c.ng_workflow_build(this);return b(this).attr("data-return")?b(this).attr("data-return"):!1})});b(".js-workflow[data-enter]").each(function(){var a=this,f=b(this).attr("data-enter");b(f).on("keypress",function(b){if(b&&13==b.keyCode)return c.ng_workflow_build(a),!1})});jsqueue.finished(a.PID)},ng_workflow_build:function(a){var c=this,e=[],f=[],g=jQuery.extend(!0,{},b(a).data());b(a).removeClass("js-workflow-onload js-workflow");b(a).attr("data-bound","true");b(".js-workflow-action[data-parent="+
b(a).attr("id")+"][data-order=pre]").each(function(){var a=b(this).data();e.push(c.ng_workflow_exec(a))});e.push(c.ng_workflow_exec(g));b(".js-workflow-action[data-parent="+b(a).attr("id")+"][data-order!=pre]").each(function(){var a=b(this).data();a.chain&&"fail"==a.chain?f.push(c.ng_workflow_exec(a)):e.push(c.ng_workflow_exec(a))});b("wf-child",a).each(function(){var a=b(this).data();a.chain&&"fail"==a.chain?f.push(c.ng_workflow_exec(a)):e.push(c.ng_workflow_exec(a))});for(a=0;a<e.length;a++)null==
e[a]&&e.splice(a,1);a=e[0];e.splice(0,1);0<e.length&&(a.chain=e);0<f.length&&(a.fail_chain=f);jsqueue.add(a)},ng_workflow_exec:function(a){switch(a.action){case "post-form":return{component:"TOOLS",command:"TOOLS_REST_API",data:{uri:this.options.uri,form:a.form,validatefunction:a.validatefunction,json:a.data},datamode:a.mode?a.mode:!1};default:var c={};a.form?core.forms.encode(a.form,c):c=b.extend({},a.data,a.merge);c={component:a.component,command:a.command,data:c,datamode:a.mode?a.mode:!1,stackname:a.stackname?
a.stackname:!1};a.reg&&(c.reg=a.reg);return c}}};b.fn.jsWorkflow=function(a){return this.each(function(){var d=b(this),e=d.data("jsQueueDebug"),f="object"==typeof a&&a;e||d.data("jsWorkflow",e=new c(this,f));if("string"==typeof a)e[a]()})};b.fn.jsWorkflow.Constructor=c})(window.jQuery);
