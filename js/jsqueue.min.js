function jsqueue_main(){this.construct=function(){this.pid=1;this.components={};this.debug=!1;this.loops={};this.queue=[];this.namedQueue={};this.registers={};this.config={auto_start:"true",maxlife:5E4,timeout:10};this.stack={}};this["debugger"]=function(){console.log("jsqueue debugger enabled");return this.debug=!0};this.register=function(b,c,a,f){this.components[b]={mode:c||"plugin",aclass:a||"",afunction:f||"",state:"inactive"}};this.set_reg=function(b,c){this.registers[b]="object"===typeof c?
$.extend({},c):c;this.debug&&(console.info("jsqueue>set_reg:"+b),console.info(c))};this.get_reg=function(b,c){var a=null;c=c||!1;a="object"===typeof this.registers[b]?$.extend({},this.registers[b]):this.registers[b];c&&delete this.registers[b];return a};this.clear_reg=function(b){delete this.registers[b];this.debug&&console.info("jsqueue>clear_reg:"+b)};this.killtag=function(b){for(var c=0;c<this.queue.length;c++)if(this.queue[c].tag==b){this.queue.splice(c,1);console.info("jsqueue>killed tag:"+b);
break}};this.clean_queue=function(){for(var b=0,c=!0;c;)for(var c=!1,a=0;a<this.queue.length;a++){if("finished"==this.queue[a].state){this.queue.splice(a,1);c=!0;break}if(jQuery.now()>this.queue[a].time+this.config.maxlife){this.debug&&console.warn("Cleaned:"+this.queue[a].PID+":"+this.queue[a].command+":"+this.queue[a].tag);this.queue.splice(a,1);b++;c=!0;break}}0<b&&this.debug&&console.info("Cleaned ("+b+") expired items from queue")};this.start_components=function(){var b=this;jQuery(".jsqueue").each(function(a,
f){var c=jQuery(this).data();b.components[c.jsq_name]={mode:"plugin",aclass:"."+c.jsq_name,afunction:c.jsq_plugin,state:"inactive"}});for(var c in b.components)if("plugin"==b.components[c].mode)if(jQuery(b.components[c].aclass)[b.components[c].afunction])jQuery(b.components[c].aclass)[b.components[c].afunction](jQuery(b.components[c].aclass).data());else console.info("Could not start component "+c)};this.add=function(b){b=jQuery.extend(!0,{},b);b.state="queued";b.time=jQuery.now();b.logic=!0;b.tag?
this.killtag(b.tag):b.tag="untagged";b.stack||(b.stack=[]);b.data||(b.data={});var c=this.pid;void 0!==b.named?(this.debug&&console.log("added named queue "+b.named),this.namedQueue[b.named]=b):(this.queue.push(b),this.process());return c};this.namedToQueue=function(b){if(void 0!==this.namedQueue[b]){var c=$.extend(!0,{},this.namedQueue[b]);c.time=jQuery.now();this.queue.push(c);this.process();this.debug&&console.log("Added named queue "+b)}};this.process=function(b){b=this;for(var c=0;c<b.queue.length;c++)if("BROADCAST"==
b.queue[c].component){b.queue[c].state="running";for(var a=0;a<b.components.length;a++)jQuery(b.components[a].aclass).trigger("command",[b.queue[c].command,b.queue[c].data]);b.queue[c].state="finished"}else if(b.components[b.queue[c].component]&&"active"==b.components[b.queue[c].component].state&&"queued"==b.queue[c].state&&(!b.queue[c].reg||b.registers[b.queue[c].reg])){b.queue[c].state="running";b.queue[c].data.PID=b.pid;a=b.queue[c];b.pid++;var f=a.data.timer||b.config.timeout;switch(a.datamode){case "stack":a.data=
jQuery.extend({},a.data,a.stack.pop());break;case "allstack":a.data.stack=a.stack;break;case "listen":a.data=jQuery.extend({},a.data,a.stack[a.stack.length-1])}b.launch_queue_item(a.component,a.command,a.data,f);a.hasOwnProperty("chain")?(a.state="triggered",b.debug&&console.info("PID("+a.data.PID+") Ran chain "+a.command+":"+f)):(a.state="finished",b.debug&&console.info("PID("+a.data.PID+") Ran command "+a.command+":"+f))}b.clean_queue()};this.launch_queue_item=function(b,c,a,f){var d=this;"off"!=
a.munge&&core.data.datamunge(a);d.debug&&console.log(a);if("object"!=d.components[b].mode)setTimeout(function(){jQuery(d.components[b].aclass).trigger("command",[c,a])},f);else{var e=d.components[b].object;e[c]?setTimeout(function(){e[c](a)},f):console.log(b+":"+c+" is not a valid object!")}};this.set_by_pid=function(b,c){for(var a=0;a<self.queue.length;a++)self.queue[a].data.PID==b&&(self.queue[a]=c)};this.push=function(b,c){for(var a=0;a<this.queue.length;a++)this.queue[a].data.PID==b&&"triggered"==
this.queue[a].state&&(this.queue[a].stackname&&(this.stack[this.queue[a].stackname]=c,this.debug&&console.warn("PID("+b+") updated named stack "+this.queue[a].stackname)),this.queue[a].stack.push(c),this.debug&&console.warn("PID("+b+") updated the stack"))};this.push_name=function(b,c){this.debug&&console.log("Named stack ["+b+"] updated");this.stack[b]=c};this.merge_name=function(b,c){this.stack[b]=$.extend({},this.stack[b],c)};this.delete_name_element=function(b,c){delete c.split(".").reduce(function(a,
b){return a[b]},this.stack[b])};this.delete_name_array_element=function(b,c,a){c.split(".").reduce(function(a,b){return a[b]},this.stack[b]).splice(a,1)};this.set_name_value=function(b,c,a){function f(a,b,c){return"string"==typeof b?f(a,b.split("."),c):1==b.length&&void 0!==c?a[b[0]]=c:0==b.length?a:f(a[b[0]],b.slice(1),c)}f(this.stack[b],c,a)};this.add_name_array_element=function(b,c,a,f){b=c.split(".").reduce(function(a,b){return a[b]},this.stack[b]);if("[object Array]"!==Object.prototype.toString.call(b)||
void 0===b)b=[];f?-1==b.indexOf(a)&&b.push(a):b.push(a)};this.get_stack=function(){return this.stack};this.get_stack_name=function(b){return this.stack[b]};this.logicfail=function(b){for(var c=0;c<this.queue.length;c++)if(this.queue[c].data.PID==b){this.queue[c].logic=!1;break}};this.finished=function(b){for(var c=0;c<this.queue.length;c++)if(this.queue[c].data.PID==b&&"triggered"==this.queue[c].state){this.queue[c].logic?(b=this.queue[c].chain[0],b.stack=this.queue[c].stack,this.queue[c].chain.splice(0,
1),0<this.queue[c].chain.length&&(b.chain=this.queue[c].chain),this.queue[c].fail_chain&&0<this.queue[c].fail_chain.length&&(b.fail_chain=this.queue[c].fail_chain),this.queue[c].state="finished",this.add(b)):(this.queue[c].fail_chain&&(b=this.queue[c].fail_chain[0],b.stack=this.queue[c].stack,this.queue[c].fail_chain.splice(0,1),0<this.queue[c].fail_chain.length&&(b.chain=this.queue[c].fail_chain),this.add(b)),this.queue[c].state="finished");break}};this.activate=function(b,c){this.components[b].state=
"active";c&&(this.components[b].object=c);this.debug&&console.warn("Component "+b+" Reports Active")};this.construct()}var jsqueue=null;
jQuery(window).on("load",function(){var b={};0<jQuery("#jsqueue").length&&(b=JSON.parse(jQuery("#jsqueue").attr("data-config")));var c=jsqueue=new jsqueue_main;c.config=jQuery.extend(c.config,b);c.plugins=[];isNull(c.config.auto_start)?jsqueue.start_components():"true"==c.config.auto_start&&jsqueue.start_components();isNull(window.loadFnc)||window.loadFnc();if("undefined"!==typeof window.jsqueue_plugins)for(b=0;b<jsqueue_plugins.length;b++)c.plugins.push(new window[jsqueue_plugins[b]])});
function isNull(b){return!("undefined"!==typeof b&&b)};(function(b){function c(a,f){var c=this;c.options=f;c.div=a;c.anims={};b(a).on({command:function(a,b,f){c[b](f)}});c.INIT_ANIMS();jsqueue.activate("ANIMATE")}c.prototype={constructor:c,PLAY_ANIMATION:function(a){this.RESET_FRAMES(a);b(a.anim+" .intro-slide").css("opacity","0");this.anims[a.anim]={position:0,frames:a.frames};this.PLAY_FRAME({anim:a.anim,frame:b(a.anim+" .slide[data-slide="+this.anims[a.anim].position+"]").attr("data-frame")});jsqueue.finished(a.PID)},RESET_FRAMES:function(a){b(a.anim+
" .slide").removeClass("transition");b(a.anim+" .slide").css("opacity","0");b(a.anim+" .slide").addClass("transition")},PLAY_FRAME:function(a){b(a.anim+" .slide").removeClass("active");if(a.frame){a.frame=JSON.parse(a.frame);for(var f=0;f<a.frame.length;f++)for(var c in a.frame[f])b(a.anim+" .slide[data-slide="+c+"]").css(a.frame[f][c])}b(a.anim+" .slide[data-slide="+this.anims[a.anim].position+"]").addClass("active");b(a.anim+" .slide[data-slide="+this.anims[a.anim].position+"]").css("opacity","1");
this.anims[a.anim].position++;this.anims[a.anim].position>this.anims[a.anim].frames&&(b(a.anim+" .intro-slide").css("opacity","1"),this.RESET_FRAMES(a))},INIT_ANIMS:function(a){var f=this;b(".animation").each(function(){var a=b(this);a.children(".slide").each(function(){b(this).css("opacity","0");b(this).attr("data-parent","#"+a.attr("id"));b(this).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){b(this).hasClass("active")&&f.PLAY_FRAME({anim:b(this).attr("data-parent"),
frame:b(this).attr("data-frame")})})})})}};b.fn.jsAnimate=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),e="object"==typeof a&&a;d||f.data("jsAnimate",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsAnimate.Constructor=c})(window.jQuery);(function(b){function c(a,f){var c=this;c.options=f;c.div=a;c.cal=null;b(a).on({command:function(a,b,f){c[b](f)}});jsqueue.activate("CALENDAR")}c.prototype={constructor:c,INIT_CALENDAR:function(a){this.cal=a.element;b(a.element).fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},dragRevertDuration:0,editable:!0,droppable:!0,eventDragStop:function(b,c){window[a["delete"]](b,c)},eventResize:function(b){window[a.update](b)},eventDrop:function(b){window[a.update](b)},
drop:function(b,c,e){window[a.drop](b,c,e,this)}});jsqueue.finished(a.PID)},CALENDAR_ADD_EVENTS:function(a){b(this.cal).fullCalendar("removeEvents");b(this.cal).fullCalendar("addEventSource",a.data);b(this.cal).fullCalendar("render");jsqueue.finished(a.PID)}};b.fn.jsCalendar=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),e="object"==typeof a&&a;d||f.data("jsCalendar",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsCalendar.Constructor=c})(window.jQuery);window.core={version:"1.0.0"};
core.data={process_statment:function(b){for(var c,a=b,f=/([a-zA-Z\.]*:\/\/[a-zA-Z_\/\.0-9@\s\#\*]*(\[.*?\])*[a-zA-Za.\_]*[\:]{0,1})/g;c=f.exec(b);)a=a.replace(c[1],'"'+core.data.uritodata(c[1])+'"');return a},htmlinject:function(b){var c,a=b,f;for(f in jsqueue.loops)for(var d=RegExp("~"+f+"~","g");d.exec(b);)a=a.replace("~"+f+"~",jsqueue.loops[f]);b=a;for(d=/\~([a-zA-Z\.]*:\/\/[a-zA-Z_\/\.0-9@\s\#\*]*(\[.*?\])*[a-zA-Za.\_]*[\:]{0,1})/g;c=d.exec(b);)f=c[1],c=c[1].replace(/\:$/,""),a=a.replace("~"+
f,this.uritodata(c));return a},uritodata:function(b,c){function a(a,b){var c=b.match(/^@(.*)/);return c?c[1]:(c=b.match(/^\*(.*)/))?JSON.stringify(a[c[1]]):void 0!==a?a[b]:""}function f(b){for(var c=b,f=/\[([a-zA-Z\.]*:\/\/[a-zA-Z_\/\.0-9@\s\#\*]*)\]/g;d=f.exec(b);)c=c.replace("["+d[1]+"]","."+core.data.uritodata(d[1]));var d=c.match(/(.*?):\/\/(.*)/);switch(d[1]){case "global":return b=d[2].split(".").reduce(a,window);case "jquery":return b=d[2].replace(/\//,""),b=$(b).val();case "reg":return b=
d[2].replace(/\//,""),b=jsqueue.get_reg(b);case "request":return b=d[2].replace(/\//,""),core.data.getUrl(b);case "stack":return b=d[2].match(/(.*?)\/(.*)/),c=b[1].split(".").reduce(a,jsqueue.stack),b=b[2]?b[2].split(".").reduce(a,c):c,void 0===b?"":b;default:return"data uri ["+d[1]+"] is not valid"}}for(var d=b.split(","),e="",g=0;g<d.length;g++)if(void 0!==c&&!0===c)e+=f(d[g])+" ";else if(e=f(d[g]))break;return e},check_params:function(b,c){var a=!0,f;for(f in b)c[f]||(console.error(b[f].message),
a=!1);return a},serializer:function(b,c){return"object"===typeof c?"Object":c},datamunge:function(b){var c=this;$.each(b,function(a,f){c.datamunge_recursive(a,f,b,b,0)})},datamunge_recursive:function(b,c,a,f,d){var e=this;if(!(10<d))if(c instanceof Object)$.each(c,function(c,h){e.datamunge_recursive(c,h,a,f[b],d++)});else{var g;if("string"==typeof c&&(g=c.match(/\!jquery:([#a-zA-Z\-_\.0-9]*)[:]{0,1}/))){var h=g[1].replace(/:.*/,"");jQuery(h).is("input:not(:checkbox),textarea,select")?f[b]=c.replace(/\!jquery:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,
jQuery(h).val()):jQuery(h).is(":checkbox")?jQuery(h).is(":checked")?f[b]=c.replace(/\!jquery:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,jQuery(h).val()):f[b]="":f[b]=c.replace(/\!jquery:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,jQuery(h).html())}if("string"==typeof c&&(g=c.match(/\!data:(.*)[:]{0,1}/))){var h=g[1].replace(/:.*/,""),k=function(a,b){return a[b]},l=h.split(".").reduce(k,a);c.match(/^\!data:(.*)[:]{0,1}$/)?f[b]=l:f[b]=c.replace(/\!data:.*[:]{0,1}/,l)}"string"==typeof c&&(g=c.match(/\!stack:\/\/([#a-zA-Z\-_\.0-9\/\*]*)[:]{0,1}/))&&
(h=g[1].replace(/:.*/,""),g=h.split("/"),h=g[1],a=jsqueue.stack[g[0]],k=function(a,b){var c=b.match(/^\*(.*)/);return c?JSON.stringify(a[c[1]]):a[b]},l=void 0,l=""!==h?h.split(".").reduce(k,a):a,"[object Array]"===Object.prototype.toString.call(l)||"object"===typeof l?f[b]=l:f[b]=c.replace(/\!stack:\/\/[#a-zA-Z\-_\.0-9\/]*[:]{0,1}/,l));"string"==typeof c&&(g=c.match(/\!request:([#a-zA-Z\-_\.0-9]*)[:]{0,1}/))&&(h=g[1].replace(/:.*/,""),f[b]=c.replace(/\!request:[#a-zA-Z\-_\.0-9]*[:]{0,1}/,core.data.getUrl(h)))}},
getUrl:function(b){return(b=RegExp("[?&]"+encodeURIComponent(b)+"=([^&]*)").exec(location.search))?decodeURIComponent(b[1]):!1}};
core.forms={encode:function(b,c){$(b+" .rest-field").each(function(a,b){var d=$(this).attr("data-send").split("."),e=c;for(a=0;a<d.length;a++)if(e[d[a]]||(e[d[a]]={}),d.length!=a+1)e=e[d[a]];else{if($(this).is(":checkbox"))if($(this).is(":checked"))if("csv"==$(this).attr("data-mode")){"object"==typeof e[d[a]]&&(e[d[a]]="");var g="";e[d[a]]&&(g=",");e[d[a]]+=g+$(this).val()}else e[d[a]]=$(this).val();else $(this).attr("data-off")&&(e[d[a]]=$(this).attr("data-off"));else"json"==$(this).attr("data-encode")?
e[d[a]]=JSON.parse($(this).val()):$(this).attr("data-ptr")?e[d[a]]=$($(this).attr("data-ptr")).val():e[d[a]]=$(this).val();break}})}};(function(b){function c(a,c){var d=this;d.options=c;d.div=a;b(a).on({command:function(a,b,c){d[b](c)}});d.MODAL_INIT();jsqueue.activate("MODAL")}c.prototype={constructor:c,MODAL_DISPLAY:function(a){b(this.div).html(b(a.template).render(a));b(this.div).off("shown.bs.modal");b(this.div).on("shown.bs.modal",function(a){b("#modal_text_helper").focus()});b(this.div).modal("show");jsqueue.finished(a.PID)},MODAL_CLOSE:function(a){b(this.div).modal("hide");jsqueue.finished(a.PID)},MODAL_TEXT_HELPER_CLICK:function(a){var c=
b(a.target);jsqueue.add({component:"MODAL",command:"MODAL_DISPLAY",data:{template:a.template,form_value:b(c).val()},chain:[{component:"TOOLS",command:"TOOLS_ADD_EVENTS",data:{triggers:[{aclass:"#modal-save",atrigger:"click",afunction:function(){b(c).val(b("#modal_text_helper").val())}}]}}]})},MODAL_TEXT_HELPER:function(a){b(a.aclass).focus(function(){var c=this;jsqueue.add({component:"MODAL",command:"MODAL_DISPLAY",data:{template:a.template,form_value:b(c).val()},chain:[{component:"TOOLS",command:"TOOLS_ADD_EVENTS",
data:{triggers:[{aclass:"#modal-save",atrigger:"click",afunction:function(){b(c).val(b("#modal_text_helper").val())}}]}}]})})},MODAL_INIT:function(a){b(this.div).addClass("modal fade")}};b.fn.jsModal=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),e="object"==typeof a&&a;d||f.data("jsModal",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsModal.Constructor=c})(window.jQuery);(function(b){function c(a,c){var d=this;d.options=c;d.div=a;b(a).on({command:function(a,b,c){d[b](c)}});jsqueue.activate("MENUS")}c.prototype={constructor:c,MENUS_DROPDOWNS:function(a){b(".ddz-option").click(function(){b(".ddz-option").siblings("ul").removeClass("show-ddz-below");b(this).hasClass("active")?b(".ddz-option").removeClass("active"):(b(this).siblings("ul").addClass("show-ddz-below"),b(".ddz-option").removeClass("active"),b(this).addClass("active"))});b(".ddz-option-sub").click(function(){b(".ddz-option-sub").siblings("ul").removeClass("show-ddz-below");
b(this).siblings("ul").addClass("show-ddz-below")});jsqueue.finished(a.PID)}};b.fn.jsMenus=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),e="object"==typeof a&&a;d||f.data("jsMenus",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsMenus.Constructor=c})(window.jQuery);(function(b){function c(a,c){var d=this;d.options=c;d.div=a;b(a).on({command:function(a,b,c){d[b](c)}});d.TIME_INIT();jsqueue.activate("TIME")}c.prototype={constructor:c,TIME_DISPLAY:function(a){var c=new Date;b(this.options.element).html(c.toUTCString());jsqueue.add({component:"TIME",command:"TIME_DISPLAY",data:{timer:3E4}});jsqueue.finished(a.PID)},TIME_INIT:function(a){jsqueue.add({component:"TIME",command:"TIME_DISPLAY"})}};b.fn.jsTime=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),
e="object"==typeof a&&a;d||f.data("jsTime",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsTime.Constructor=c})(window.jQuery);(function(b){function c(a,c){var d=this;d.options=c;d.$element=b(a);b(a).on({command:function(a,b,c){if(d[b])d[b](c);else console.warn("Error no cmd:"+b)}});jsqueue.activate("TOOLS")}c.prototype={constructor:c,TOOLS_FULLSCREEN:function(a){a=window.document;var b=a.documentElement,c=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullscreen,e=a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen;a.fullscreenElement||a.mozFullScreenElement||
a.webkitFullscreenElement||a.msFullscreenElement?e.call(a):c.call(b);console.log("full screen")},TOOLS_RUN:function(a){b(a.target).trigger("run");jsqueue.finished(a.PID)},TOOLS_CLICK:function(a){b(a.target).click();jsqueue.finished(a.PID)},TOOLS_IF:function(a){a.if_path.split(".").reduce(function(a,b){return a?a[b]:""},a)!==a.if_check&&jsqueue.logicfail(a.PID);jsqueue.finished(a.PID)},TOOLS_UPDATE_VALUE:function(a){b(a.element).val(a.value);jsqueue.finished(a.PID)},TOOLS_EXECUTE_TEMPLATE:function(a){b("#command-window").html(b(a.template).render(a));
jsqueue.add({component:"WORKFLOW",command:"WORKFLOW_START"});jsqueue.finished(a.PID)},TOOLS_UPDATE_VALUE_WITH_VALUE:function(a){var c=b(a.passed_element).val();b(a.element).val(c);jsqueue.finished(a.PID)},TOOLS_UPDATE_VALUE_WITH_HTML:function(a){var c=b(a.passed_element).html();b(a.element).val(c);jsqueue.finished(a.PID)},TOOLS_UPDATE_HTML:function(a){b(a.element).html(a.value);jsqueue.finished(a.PID)},TOOLS_START_CAROUSEL:function(a){b(".carousel").carousel();jsqueue.finished(a.PID)},TOOLS_SET_ATTRIBUTE:function(a){b(a.target).attr(a.attributes);
jsqueue.finished(a.PID)},TOOLS_RELOAD:function(a){window.location.reload();jsqueue.finished(a.PID)},TOOLS_SLIDE_TOGGLE:function(a){var c=a.offset||20;if(a.target){var d=b(a.target);0>d.position().left?(d.css({left:"0px"}),d.addClass("active")):(d.css({left:"-"+(d.width()-c)+"px"}),d.removeClass("active"))}else console.warn("TOOL_SLIDE_TOGGLE called with no target");jsqueue.finished(a.PID)},TOOLS_FORMAT_DATA:function(a){function b(a,c){return a[c]}var c={},e;for(e in a.paths)if("root"==a.paths[e])c[e]=
a;else{var g=e.split(".");1==g.length?c[e]=a.paths[e].split(".").reduce(b,a):(c[g[0]]={},c[g[0]][g[1]]=a.paths[e].split(".").reduce(b,a))}jsqueue.push(a.PID,c);jsqueue.finished(a.PID)},TOOLS_SET_REG:function(a){function b(a,c){return a[c]}if(a.path){var c=a.path.split(".").reduce(b,a);jsqueue.set_reg(a.reg,c)}else jsqueue.set_reg(a.reg,a.value);jsqueue.finished(a.PID)},TOOLS_CLEAR_REG:function(a){jsqueue.clear_reg(a.reg);jsqueue.finished(a.PID)},TOOLS_TOGGLE_HIDDEN:function(a){for(var c=0;c<a.elements.length;c++)b(a.elements[c]).toggleClass("hidden");
jsqueue.finished(a.PID)},TOOLS_TOGGLE_CLASS:function(a){if(!a.ifclass||this.ifclass(a.ifclass))a.clear||a.set?(b(a.clear).removeClass(a["class"]),b(a.set).addClass(a["class"])):b(a.target).toggleClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_STATE_CLASS:function(a){a.ifclass&&this.ifclass(a.ifclass)?(b(a.target).removeClass(a.falseclass),b(a.target).addClass(a.trueclass)):(b(a.target).removeClass(a.trueclass),b(a.target).addClass(a.falseclass));jsqueue.finished(a.PID)},ifclass:function(a){return 0<
b(a).length?!0:!1},TOOLS_TOGGLE_BETWEEN_CLASS:function(a){a.clear||a.set?(b(a.clear).removeClass(a["class"]),b(a.set).addClass(a["class"])):b(a.target).toggleClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_UPDATE_CLASS:function(a){a.target=a.target||a.element;b(a.target).removeClass(a.remove_class);b(a.target).addClass(a.add_class);jsqueue.finished(a.PID)},TOOLS_SET_HIDDEN:function(a){a.target=a.target||a.element;b(a.target).addClass("hidden");jsqueue.finished(a.PID)},TOOLS_REMOVE_HIDDEN:function(a){a.target=
a.target||a.element;b(a.target).removeClass("hidden");jsqueue.finished(a.PID)},TOOLS_REMOVE_CLASS:function(a){b(a.target).removeClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_ADD_CLASS:function(a){b(a.target).addClass(a["class"]);jsqueue.finished(a.PID)},TOOLS_RUN_NAMED_QUEUE:function(a){jsqueue.namedToQueue(a.namedQueue);jsqueue.finished(a.PID)},TOOLS_FIND_HELP:function(a){b(".helper").each(function(){var a=b(this),c=a.data();a.popover({trigger:"click",placement:"right",html:!0,title:c.title,content:function(){return c.templateDisplay?
b(c.templateDisplay).html():c.helptext}}).click(function(a){a.preventDefault();jsqueue.add({component:"WORKFLOW",command:"WORKFLOW_START"})})});jsqueue.finished(a.PID)},TOOLS_DISPLAY_TEMPLATE:function(a){a.target=a.target||a.element;0>=b(a.target).length&&console.warn("Element does not exist:"+a.target);0>=b(a.template).length&&console.warn("Template does not exist"+a.template);b(a.target).html(b(a.template).render(a));jsqueue.finished(a.PID)},TOOLS_RENDER_TEMPLATE:function(a){var c={};c.body=b(a.template).render(a);
jsqueue.push(a.PID,c);jsqueue.finished(a.PID)},TOOLS_WF_TEMPLATE:function(a){jsqueue.push_name("TEMPLATE",a);0<b(a.template).length?(b(a.target).html(core.data.htmlinject(b(a.template).html())),a["class"]&&b(a.target).addClass(a["class"])):console.info("Warning template ["+a.template+"] not found");jsqueue.finished(a.PID)},TOOLS_RUN_FUNCTION:function(a){if(a.parameters)window[a.afunction](a.parameters);else window[a.afunction]();jsqueue.finished(a.PID)},TOOLS_ADD_EVENTS:function(a){for(var c=0;c<
a.triggers.length;c++)if(b(a.triggers[c].aclass).unbind(a.triggers[c].atrigger),"string"==typeof a.triggers[c].afunction)b(a.triggers[c].aclass).on(a.triggers[c].atrigger,window[a.triggers[c].afunction]);else b(a.triggers[c].aclass).on(a.triggers[c].atrigger,a.triggers[c].afunction);a.global&&a.global();jsqueue.finished(a.PID)},helper_replace_value:function(a,c,d,e){var g=this;if(c instanceof Object)b.each(c,function(b,c){g.helper_replace_value(b,c,d,e[a])});else{var h;if("string"==typeof c&&(h=c.match(/%(.*?)%/))){console.info("TOOLS_REST_API call is using depricated helper_replace_value % value. Please move to !data: format");
c=h[1].match(/[^\.]+(?:\.\.[^\.]+)*/g);h=d;for(var k=0;k<c.length;k++)if(c[k]=c[k].replace(/\.\./,"."),h[c[k]]||(h[c[k]]={}),c.length!=k+1)h=h[c[k]];else{e[a]="object"==typeof h[c[k]]?h[c[k]]:e[a].replace(/%.*?%/,h[c[k]]);break}}else"string"==typeof c&&(h=c.match(/^(#.*?)/))&&(console.info("TOOLS_REST_API call is using depricated helper_replace_value # value. Please move to !jquery: format"),c.match(/^(#.*?)\&array/)?(h=c.match(/^(#.*?)\&array/),e[a]=[jQuery(h[1]).val()]):((h=c.match(/^(#\..*?)/))&&
(c=c.substr(1)),e[a]=jQuery(c).val()))}},TOOLS_DISABLE_BUTTON:function(a){a.button&&(a.text&&(b(a.button).attr("data-oldtext",b(a.button).text()),b(a.button).text(a.text)),a.aclass&&(b(a.button).attr("data-oldclass",b(a.button).attr("class")),b(a.button).removeClass(b(a.button).attr("class")),b(a.button).addClass(a.aclass)),!0==a.displayLoadAnimation&&b(a.button).append("<span class='glyphicon glyphicon-refresh spinning'></span>"),b(a.button).prop("disabled",!0));if(a.buttons)for(var c=0;c<a.buttons.length;c++)b(a.buttons[c]).prop("disabled",
!0);jsqueue.finished(a.PID)},TOOLS_ENABLE_BUTTON:function(a){a.button&&(b(a.button).prop("disabled",!1),a.text&&b(a.button).text(a.text),a.revert&&!0==a.revert&&b(a.button).text(b(a.button).attr("data-oldtext")),b(a.button).attr("data-oldclass")&&(b(a.button).removeClass(b(a.button).attr("class")),b(a.button).addClass(b(a.button).attr("data-oldclass"))));if(a.buttons)for(var c=0;c<a.buttons.length;c++)b(a.buttons[c]).prop("disabled",!1);jsqueue.finished(a.PID)},TOOLS_CHANGE_BUTTON_TEXT:function(a){b(a.button).text(a.text);
jsqueue.finished(a.PID)},TOOLS_CHANGE_BUTTON_COLOUR:function(a){a.button&&(a.toAdd&&a.toRemove)&&b(a.button).addClass(a.toAdd).removeClass(a.toRemove);jsqueue.finished(a.PID)},TOOLS_DISPLAY_LOAD_ANIMATION:function(a){a.element&&b(a.element).append("<span class='glyphicon glyphicon-refresh spinning'></span>");jsqueue.finished(a.PID)},TOOLS_DELAY_ACTION:function(a){a.component&&(a.command&&a.data&&a.delay)&&window.setTimeout(function(){a.chain?jsqueue.add({component:a.component,command:a.command,data:a.data,
chain:a.chain}):jsqueue.add({component:a.component,command:a.command,data:a.data})},a.delay);jsqueue.finished(a.PID)},TOOLS_SCHEDULE_ACTION:function(a){a.chain?jsqueue.add({component:a.component,command:a.command,data:a.data,chain:a.chain}):jsqueue.add({component:a.component,command:a.command,data:a.data});setInterval(function(){a.chain?jsqueue.add({component:a.component,command:a.command,data:a.data,chain:a.chain}):jsqueue.add({component:a.component,command:a.command,data:a.data})},1E4);jsqueue.finished(a.PID)},
TOOLS_REDIRECT:function(a){var c=this;a&&b.each(a,function(b,e){c.helper_replace_value(b,e,a,a)});window.top.location=a.location;jsqueue.finished(a.PID)},TOOLS_ANIMSCROLL:function(a){b(a.element).animate({scrollLeft:a.offset},a.duration||400);jsqueue.finished(a.PID)},TOOLS_JS_SCROLL:function(a){b(a.element).each(function(){b(this).height(b(window).height())});jsqueue.finished(a.PID)},TOOLS_PROGRESS_DISPLAY:function(a){a.element&&a.name&&b(a.element).html('<div class="progress progress-striped active"><div class="progress-bar progress-bar-danger" id="'+
a.name+'" style="width: 0%;"></div></div>');jsqueue.finished(a.PID)},TOOLS_PROGRESS_UPDATE:function(a){a.element&&a.progress&&b(a.element).css("width",a.progress+"%");jsqueue.finished(a.PID)},TOOLS_RUN_JAVASCRIPT:function(a){eval(a["function"]+"("+a.args+");")},TOOLS_PUSH_NAME:function(a){jsqueue.push_name(a.stackname,a.data);jsqueue.finished(a.PID)},TOOLS_MERGE_NAME:function(a){jsqueue.merge_name(a.stackname,a.data);jsqueue.finished(a.PID)},TOOLS_SET_NAME_VALUE:function(a){jsqueue.set_name_value(a.stackname,
a.path,a.value);jsqueue.finished(a.PID)},TOOLS_DELETE_NAME_ELEMENT:function(a){jsqueue.delete_name_element(a.stackname,a.element);jsqueue.finished(a.PID)},TOOLS_DELETE_NAME_ARRAY_ITEM:function(a){jsqueue.delete_name_array_element(a.stackname,a.path,a.index);jsqueue.finished(a.PID)},TOOLS_ADD_NAME_ARRAY_ITEM:function(a){jsqueue.add_name_array_element(a.stackname,a.path,a.value,a.unique);jsqueue.finished(a.PID)},TOOLS_URI_TO_NAMED:function(a){var b=core.data.uritodata(a.statement);jsqueue.push_name(a.stackname,
b);jsqueue.finished(a.PID)},TOOLS_REST_API:function(a){var c=this,d={},e=b.extend(!0,{},a);e.uri||(e.uri=c.options.uri);if(e.form){if(e.validatefunction&&!window[e.validatefunction](e.form))return;core.forms.encode(e.form,d)}e.json&&b.each(a.json,function(a,b){c.helper_replace_value(a,b,e,e.json)});d=b.extend(!0,{},e.json,d);d=encodeURIComponent(JSON.stringify(d));-1!=navigator.appVersion.indexOf("MSIE 9")||-1!=navigator.appVersion.indexOf("MSIE 8")?b.ajax({type:"POST",url:e.uri,data:d,async:!0,processData:!1,
traditional:!1,headers:a.headers||{},success:function(b){a.nostack||(e.json&&e.json.ignoredata?jsqueue.push(e.PID,b.data):jsqueue.push(e.PID,b));jsqueue.finished(e.PID);c.debug&&(console.info("jsTools->call_api"),console.info(b));e.success&&e.success(b)},error:function(a){c.debug&&(console.warn("jsTools->call_api"),console.warn(a))}}):b.ajax({type:"POST",url:e.uri,data:d,async:!0,crossDomain:!0,xhrFields:{withCredentials:!0},processData:!1,traditional:!1,headers:a.headers||{},success:function(b){a.nostack||
(e.json&&e.json.ignoredata?jsqueue.push(e.PID,b.data):jsqueue.push(e.PID,b));c.debug&&(console.info("jsTools->call_api"),console.info(b));e.success&&e.success(b);"ERROR"==b.result&&(jsqueue.push_name("API_ERROR_RECV_DATA",b),jsqueue.push_name("API_ERROR_SEND_DATA",e),jsqueue.namedToQueue("WF_API_ERROR"));jsqueue.finished(e.PID)},error:function(a){jsqueue.namedToQueue("WF_API_ERROR");c.debug&&(console.warn("jsTools->call_api"),console.warn(a))}})}};b.fn.jsTools=function(a){return this.each(function(){var f=
b(this),d=f.data("jsQueueDebug"),e="object"==typeof a&&a;d||f.data("jsTools",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsTools.Constructor=c})(window.jQuery);(function(b){function c(a,c){var d=this;d.options=c;d.div=a;b(a).on({command:function(a,b,c){d[b](c)}});jsqueue.activate("CKEDITOR")}c.prototype={constructor:c,INIT_EDITOR:function(a){CKEDITOR.disableAutoInline=!0;CKEDITOR.inline(a.target,a.config||{});jsqueue.finished(a.PID)},CLEANUP_EDITOR:function(a){for(name in CKEDITOR.instances)CKEDITOR.instances[name].destroy(!0);jsqueue.finished(a.PID)}};b.fn.jsCKeditor=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),e="object"==
typeof a&&a;d||f.data("jsCKeditor",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsCKeditor.Constructor=c})(window.jQuery);(function(b){function c(a,c){function d(a){document.dispatchEvent(new CustomEvent("readystatechange"))}var e=this;e.options=c;e.div=a;b(a).on({command:function(a,b,c){e[b](c)}});jsqueue.activate("WORKFLOW");!0==e.options.auto&&e.WORKFLOW_START({});var g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){b(this).data();e.ng_workflow_build(this);b(this).remove()};document.registerElement("wf-load",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=
b(this).data(),c=core.data.process_statment(a.statement);b(this).append(b("<input/>",{type:"checkbox",id:a.id,checked:eval(c),value:a.value}));b(this).contents().unwrap();void 0!==a.changequeue&&b("#"+a.id).click(function(){jsqueue.namedToQueue(a.changequeue)})};document.registerElement("wf-checkbox",{prototype:g});g=Object.create(HTMLElement.prototype);g.createdCallback=function(){b(this).data();var a=b(this).attr("data-events")||"click run";b(this).unbind(a);b(this).on(a,function(a){a.stopPropagation();
e.ng_workflow_build(this);return b(this).attr("data-return")?b(this).attr("data-return"):!1})};document.registerElement("wf-event",{prototype:g});g=Object.create(HTMLElement.prototype);g.createdCallback=function(){var a=b(this).data();if(core.data.check_params({source:{message:"No source specified"}},a)){a.format||(a.format="TXT_ONLY");if(a.format.match(/DEBUG/g))debugger;var c=!1;a.format.match(/CONCAT/g)&&(c=!0);c=core.data.uritodata(a.source,c);a.format.match(/SUBSTR/g)&&(void 0!==a.length?c=c.substr(0,
a.length):console.warn("SUBSTR output but no length attr supplied"));a.format.match(/CONSOLE/g)?console.log(c):("object"===typeof c&&(c=JSON.stringify(c)),void 0!==c?a.format.match(/HTML/g)?b(this).html(c):b(this).text(c):b(this).text(""));a.format.match(/TXT_ONLY/g)&&b(this).contents().unwrap()}else console.log(this)};document.registerElement("wf-text",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();core.data.check_params({template:{message:"No template specified"}},
a)?(b(this).append(core.data.htmlinject(b(a.template).html())),b(this).contents().unwrap(),d(this)):console.log(this)};document.registerElement("wf-template",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();if(core.data.check_params({file:{message:"No file specified"}},a)){var c=this;b.ajax({url:a.file,success:function(a){b(c).html(a);b(c).contents().unwrap()},async:!1});d(this)}else console.log(this)};document.registerElement("wf-include",{prototype:g});
g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();if(core.data.check_params({statement:{message:"No statement specified"},template:{message:"No template specified"}},a)){var c=core.data.process_statment(a.statement);a.debug&&console.info(c);eval(c)?(b(this).append(core.data.htmlinject(b(a.template).html())),b(this).contents().unwrap()):a.elsetemplate?(b(this).append(core.data.htmlinject(b(a.elsetemplate).html())),b(this).contents().unwrap()):b(this).remove();
d(this)}else console.log(this)};document.registerElement("wf-if",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();if(core.data.check_params({source:{message:"No source specified"}},a)){var c=core.data.uritodata(a.source),f=this;b("wf-case",f).each(function(){var a=b(this).data();a.value==c&&(b(f).html(core.data.htmlinject(b(a.template).html())),b("wf-default",f).remove());b(this).remove()});a=b("wf-default",f);if(0<a.length){var e=a.data();b(f).html(core.data.htmlinject(b(e.template).html()));
a.remove()}b(f).contents().unwrap();d(this)}else console.log(this)};document.registerElement("wf-switch",{prototype:g});g=Object.create(HTMLElement.prototype);g.attachedCallback=function(){var a=b(this).data();if(core.data.check_params({source:{message:"No source specified"},template:{message:"No template specified"}},a)){var c=a.index||"index",f=core.data.uritodata(a.source),e=a.target||this;if(0>=b(e).length)console.error("Target does not exist:"+a.target);else{jsqueue.loops[c]=0;if("[object Array]"===
Object.prototype.toString.call(f))for(var g=0;g<f.length;g++)jsqueue.loops[c]=g,a.stackname&&jsqueue.push_name(a.stackname,f[g]),b(e).append(core.data.htmlinject(b(a.template).html())),d(e);else for(g in f)jsqueue.loops[c]=g,a.stackname&&jsqueue.push_name(a.stackname,{key:g,value:f[g]}),b(e).append(core.data.htmlinject(b(a.template).html())),d(e);a.target?b(this).remove():b(this).contents().unwrap()}}else console.log(this)};document.registerElement("wf-for",{prototype:g})}c.prototype={constructor:c,
WORKFLOW_START:function(a){var c=this;jsqueue&&jsqueue.debug&&b("[id]").each(function(){var a=b('[id="'+this.id+'"]');1<a.length&&a[0]==this&&console.warn("Multiple IDs #"+this.id)});a.mobile=a.mobile||!1;b(".js-workflow-onload,.js-workflow-onrun").each(function(){c.ng_workflow_build(this)});b(".js-workflow").unbind("click");b(".js-workflow").unbind("run");b(".js-workflow:not([data-events])").on("click run",function(a){console.log("Class method js-workflow is now deprecated, convert to wf-event model");
console.log(this);a.stopPropagation();c.ng_workflow_build(this);return b(this).attr("data-return")?b(this).attr("data-return"):!1});b(".js-workflow[data-events]").each(function(){console.log("Class method js-workflow is now deprecated, convert to wf-event model");console.log(this);b(this).on(b(this).attr("data-events"),function(a){a.stopPropagation();c.ng_workflow_build(this);return b(this).attr("data-return")?b(this).attr("data-return"):!1})});b(".js-workflow[data-enter]").each(function(){var a=
this,e=b(this).attr("data-enter");b(e).on("keypress",function(b){if(b&&13==b.keyCode)return c.ng_workflow_build(a),!1})});jsqueue.finished(a.PID)},ng_workflow_build:function(a){var c=this,d=[],e=[],g=jQuery.extend(!0,{},b(a).data());b(a).removeClass("js-workflow-onload js-workflow");b(a).attr("data-bound","true");b(".js-workflow-action[data-parent="+b(a).attr("id")+"][data-order=pre]").each(function(){var a=b(this).data();d.push(c.ng_workflow_exec(a))});d.push(c.ng_workflow_exec(g));b(".js-workflow-action[data-parent="+
b(a).attr("id")+"][data-order!=pre]").each(function(){var a=b(this).data();a.chain&&"fail"==a.chain?e.push(c.ng_workflow_exec(a)):d.push(c.ng_workflow_exec(a))});b("wf-child",a).each(function(){var a=b(this).data();a.chain&&"fail"==a.chain?e.push(c.ng_workflow_exec(a)):d.push(c.ng_workflow_exec(a))});for(a=0;a<d.length;a++)null==d[a]&&d.splice(a,1);a=d[0];d.splice(0,1);0<d.length&&(a.chain=d);0<e.length&&(a.fail_chain=e);jsqueue.add(a)},ng_workflow_exec:function(a){switch(a.action){case "post-form":return{component:"TOOLS",
command:"TOOLS_REST_API",data:{uri:this.options.uri,form:a.form,validatefunction:a.validatefunction,json:a.data},datamode:a.mode?a.mode:!1};default:var c={};a.form?core.forms.encode(a.form,c):c=b.extend({},a.data,a.merge);c={component:a.component,command:a.command,data:c,datamode:a.mode?a.mode:!1,stackname:a.stackname?a.stackname:!1};a.named&&(c.named=a.named);a.reg&&(c.reg=a.reg);return c}}};b.fn.jsWorkflow=function(a){return this.each(function(){var f=b(this),d=f.data("jsQueueDebug"),e="object"==
typeof a&&a;d||f.data("jsWorkflow",d=new c(this,e));if("string"==typeof a)d[a]()})};b.fn.jsWorkflow.Constructor=c})(window.jQuery);
